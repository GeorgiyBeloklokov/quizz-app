{"ast":null,"code":"import { createApi } from '@reduxjs/toolkit/query/react';\nimport { customFetchBase } from '.';\nimport { setUser, logout } from '../reducers/userSlice';\nexport const registrationApi = createApi({\n  reducerPath: 'registrationApi',\n  baseQuery: customFetchBase,\n  endpoints: builder => ({\n    registrationUser: builder.mutation({\n      query(data) {\n        return {\n          url: 'auth/registration',\n          method: 'POST',\n          body: data,\n          credentials: 'include'\n        };\n      },\n      async onQueryStarted(args, _ref) {\n        let {\n          dispatch,\n          queryFulfilled\n        } = _ref;\n        try {\n          const {\n            data\n          } = await queryFulfilled;\n          dispatch(setUser(data));\n        } catch (error) {}\n      }\n    }),\n    logoutUser: builder.mutation({\n      query() {\n        return {\n          url: 'auth/logout',\n          credentials: 'include'\n        };\n      },\n      async onQueryStarted(args, _ref2) {\n        let {\n          dispatch,\n          queryFulfilled\n        } = _ref2;\n        try {\n          await queryFulfilled;\n          dispatch(logout());\n        } catch (error) {}\n      }\n    })\n  })\n});\nexport const {\n  useRegistrationUserMutation\n} = registrationApi;","map":{"version":3,"names":["createApi","customFetchBase","setUser","logout","registrationApi","reducerPath","baseQuery","endpoints","builder","registrationUser","mutation","query","data","url","method","body","credentials","onQueryStarted","args","dispatch","queryFulfilled","error","logoutUser","useRegistrationUserMutation"],"sources":["C:/Users/georg/Desktop/diskD/diskD/my/read-books/src/store/api/RegistrationApi.ts"],"sourcesContent":["import { createApi } from '@reduxjs/toolkit/query/react';\r\nimport { customFetchBase } from '.';\r\nimport { LoginInput } from '../../components/utils/types';\r\nimport { IUser, setUser, logout } from '../reducers/userSlice';\r\n\r\nexport const registrationApi = createApi({\r\n  reducerPath: 'registrationApi',\r\n  baseQuery: customFetchBase,\r\n  endpoints: (builder) => ({\r\n    registrationUser: builder.mutation<IUser, LoginInput>({\r\n      query(data) {\r\n        return {\r\n          url: 'auth/registration',\r\n          method: 'POST',\r\n          body: data,\r\n          credentials: 'include',\r\n        };\r\n      },\r\n      async onQueryStarted(args, { dispatch, queryFulfilled }) {\r\n        try {\r\n          const { data } = await queryFulfilled;\r\n          dispatch(setUser(data));\r\n        } catch (error) {}\r\n      },\r\n    }),\r\n    logoutUser: builder.mutation<void, void>({\r\n      query() {\r\n        return {\r\n          url: 'auth/logout',\r\n          credentials: 'include',\r\n        };\r\n      },\r\n      async onQueryStarted(args, { dispatch, queryFulfilled }) {\r\n        try {\r\n          await queryFulfilled;\r\n          dispatch(logout());\r\n        } catch (error) {}\r\n      },\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const { useRegistrationUserMutation } = registrationApi;\r\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,8BAA8B;AACxD,SAASC,eAAe,QAAQ,GAAG;AAEnC,SAAgBC,OAAO,EAAEC,MAAM,QAAQ,uBAAuB;AAE9D,OAAO,MAAMC,eAAe,GAAGJ,SAAS,CAAC;EACvCK,WAAW,EAAE,iBAAiB;EAC9BC,SAAS,EAAEL,eAAe;EAC1BM,SAAS,EAAGC,OAAO,KAAM;IACvBC,gBAAgB,EAAED,OAAO,CAACE,QAAQ,CAAoB;MACpDC,KAAK,CAACC,IAAI,EAAE;QACV,OAAO;UACLC,GAAG,EAAE,mBAAmB;UACxBC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEH,IAAI;UACVI,WAAW,EAAE;QACf,CAAC;MACH,CAAC;MACD,MAAMC,cAAc,CAACC,IAAI,QAAgC;QAAA,IAA9B;UAAEC,QAAQ;UAAEC;QAAe,CAAC;QACrD,IAAI;UACF,MAAM;YAAER;UAAK,CAAC,GAAG,MAAMQ,cAAc;UACrCD,QAAQ,CAACjB,OAAO,CAACU,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC,OAAOS,KAAK,EAAE,CAAC;MACnB;IACF,CAAC,CAAC;IACFC,UAAU,EAAEd,OAAO,CAACE,QAAQ,CAAa;MACvCC,KAAK,GAAG;QACN,OAAO;UACLE,GAAG,EAAE,aAAa;UAClBG,WAAW,EAAE;QACf,CAAC;MACH,CAAC;MACD,MAAMC,cAAc,CAACC,IAAI,SAAgC;QAAA,IAA9B;UAAEC,QAAQ;UAAEC;QAAe,CAAC;QACrD,IAAI;UACF,MAAMA,cAAc;UACpBD,QAAQ,CAAChB,MAAM,EAAE,CAAC;QACpB,CAAC,CAAC,OAAOkB,KAAK,EAAE,CAAC;MACnB;IACF,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEE;AAA4B,CAAC,GAAGnB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}